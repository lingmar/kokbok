#!/usr/bin/env python3

import os, os.path
import sys
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__),'..')))

import MySQLdb

from kokbok import conf
from kokbok import model

def main():
    # with MySQLdb.connect(**conf.db) as cursor:
    #     with open('kokbok.sql') as x:
    #         for line in x.read().split(';\n'):
    #             if len(line.strip()) > 0 :
    #                 cursor.execute(line)
    #                 cursor.execute("Select * from Recipe")
    #                 cursor.execute("Select * from Recipe")
    #                 cursor.execute("Select * from Recipe")
    #                 print(cursor.fetchall())

    ingredient = model.Ingredient("TestIngredient", 1, 2, 3, 4, 5, 6, 7)
    ingredient.save()
    
    ingredient_list = model.IngredientList([ingredient], "TestIngredientList", None)
    ingredient_list.save()
    
    recipe = model.Recipe("TestRecipe", 1, 2, 3, "Description", 1, [ingredient_list], "Author", "Instructions", "Comments", "Pictures")

    recipe.save()
    print(recipe)
    print(recipe.by_id(recipe._id))

    # This raises an exception (probably)
    # print(ingredient.by_id(398405))
    print(recipe.by_id(28098))
    
    # ingredient_list = model.IngredientList([ingredient, ingredient2], "hej")
    # ingredient_list.save()
    # print(ingredient_list._id)
    # print(ingredient_list)

    # Remove ingredient from db
#    ingredient.delete()

if __name__ == '__main__':
    main()
